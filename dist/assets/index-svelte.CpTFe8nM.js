(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();const gn="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(gn);let it=!1,yn=!1;function mn(){it=!0}mn();const xt=1,kt=2,xr=4,bn=8,wn=16,Sn=1,En=2,D=Symbol(),Tn="http://www.w3.org/1999/xhtml",kr=!1;var Zt=Array.isArray,In=Array.prototype.indexOf,Nr=Array.from,ht=Object.defineProperty,Bt=Object.getOwnPropertyDescriptor,Rr=Object.getOwnPropertyDescriptors,Pn=Object.prototype,Cn=Array.prototype,er=Object.getPrototypeOf;const Te=()=>{};function xn(e){return e()}function _t(e){for(var t=0;t<e.length;t++)e[t]()}function kn(){var e,t,r=new Promise((n,s)=>{e=n,t=s});return{promise:r,resolve:e,reject:t}}const K=2,tr=4,Nt=8,Ge=16,he=32,He=64,Vr=128,Z=256,gt=512,F=1024,ee=2048,ke=4096,se=8192,ze=16384,rr=32768,nr=65536,gr=1<<17,Nn=1<<18,Rt=1<<19,Or=1<<20,zt=1<<21,sr=1<<22,Oe=1<<23,je=Symbol("$state"),Rn=Symbol(""),ar=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Vn(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function Ar(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function On(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function An(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function $n(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Dn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Mn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Un(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function jn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Fn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let qn=!1;function $r(e){return e===this.v}function Dr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Mr(e){return!Dr(e,this.v)}let O=null;function yt(e){O=e}function lt(e,t=!1,r){O={p:O,c:null,e:null,s:e,x:null,l:it&&!t?{s:null,u:null,$:[]}:null}}function ot(e){var t=O,r=t.e;if(r!==null){t.e=null;for(var n of r)Kr(n)}return O=t.p,{}}function ut(){return!it||O!==null&&O.l===null}const Ln=new WeakMap;function Yn(e){var t=T;if(t===null)return E.f|=Oe,e;if((t.f&rr)===0){if((t.f&Vr)===0)throw!t.parent&&e instanceof Error&&Ur(e),e;t.b.error(e)}else ir(e,t)}function ir(e,t){for(;t!==null;){if((t.f&Vr)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e instanceof Error&&Ur(e),e}function Ur(e){const t=Ln.get(e);t&&(ht(e,"message",{value:t.message}),ht(e,"stack",{value:t.stack}))}let mt=[];function Bn(){var e=mt;mt=[],_t(e)}function lr(e){mt.length===0&&queueMicrotask(Bn),mt.push(e)}function Gn(){for(var e=T.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&Vn(),e}function or(e){var t=K|ee,r=E!==null&&(E.f&K)!==0?E:null;return T===null||r!==null&&(r.f&Z)!==0?t|=Z:T.f|=Rt,{ctx:O,deps:null,effects:null,equals:$r,f:t,fn:e,reactions:null,rv:0,v:D,wv:0,parent:r??T,ac:null}}function Hn(e,t){let r=T;r===null&&On();var n=r.b,s=void 0,a=nt(D),i=null,f=!E;return as(()=>{try{var l=e();i&&Promise.resolve(l).catch(()=>{})}catch(d){l=Promise.reject(d)}var o=()=>l;s=i?.then(o,o)??Promise.resolve(l),i=s;var c=M,h=n.pending;f&&(n.update_pending_count(1),h||c.increment());const v=(d,u=void 0)=>{i=null,h||c.activate(),u?u!==ar&&(a.f|=Oe,st(a,u)):((a.f&Oe)!==0&&(a.f^=Oe),st(a,d)),f&&(n.update_pending_count(-1),h||c.decrement()),Lr()};if(s.then(v,d=>v(null,d||"unknown")),c)return()=>{queueMicrotask(()=>c.neuter())}}),new Promise(l=>{function o(c){function h(){c===s?l(a):o(s)}c.then(h,h)}o(s)})}function jr(e){const t=or(e);return t.equals=Mr,t}function Fr(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)$e(t[r])}}function zn(e){for(var t=e.parent;t!==null;){if((t.f&K)===0)return t;t=t.parent}return null}function ur(e){var t,r=T;xe(zn(e));try{Fr(e),t=an(e)}finally{xe(r)}return t}function qr(e){var t=ur(e);if(e.equals(t)||(e.v=t,e.wv=nn()),!Ke)if(Ye!==null)Ye.set(e,e.v);else{var r=(Ee||(e.f&Z)!==0)&&e.deps!==null?ke:F;B(e,r)}}function Kn(e,t,r){const n=ut()?or:jr;if(t.length===0){r(e.map(n));return}var s=M,a=T,i=Wn(),f=Gn();Promise.all(t.map(l=>Hn(l))).then(l=>{s?.activate(),i();try{r([...e.map(n),...l])}catch(o){(a.f&ze)===0&&ir(o,a)}s?.deactivate(),Lr()}).catch(l=>{f.error(l)})}function Wn(){var e=T,t=E,r=O,n=M;return function(){xe(e),fe(t),yt(r),n?.activate()}}function Lr(){xe(null),fe(null),yt(null)}const Qe=new Set;let M=null,Ye=null,yr=new Set,bt=[];function Yr(){const e=bt.shift();bt.length>0&&queueMicrotask(Yr),e()}let tt=[],fr=null,Kt=!1;class rt{current=new Map;#s=new Map;#a=new Set;#e=0;#u=null;#f=!1;#r=[];#i=[];#n=[];#t=[];#l=[];#c=[];#v=[];skipped_effects=new Set;process(t){tt=[];var r=null;if(Qe.size>1){r=new Map,Ye=new Map;for(const[a,i]of this.current)r.set(a,{v:a.v,wv:a.wv}),a.v=i;for(const a of Qe)if(a!==this)for(const[i,f]of a.#s)r.has(i)||(r.set(i,{v:i.v,wv:i.wv}),i.v=f)}for(const a of t)this.#p(a);if(this.#r.length===0&&this.#e===0){this.#d();var n=this.#n,s=this.#t;this.#n=[],this.#t=[],this.#l=[],M=null,mr(n),mr(s),M===null?M=this:Qe.delete(this),this.#u?.resolve()}else this.#o(this.#n),this.#o(this.#t),this.#o(this.#l);if(r){for(const[a,{v:i,wv:f}]of r)a.wv<=f&&(a.v=i);Ye=null}for(const a of this.#r)qe(a);for(const a of this.#i)qe(a);this.#r=[],this.#i=[]}#p(t){t.f^=F;for(var r=t.first;r!==null;){var n=r.f,s=(n&(he|He))!==0,a=s&&(n&F)!==0,i=a||(n&se)!==0||this.skipped_effects.has(r);if(!i&&r.fn!==null){if(s)r.f^=F;else if((n&tr)!==0)this.#t.push(r);else if((n&F)===0)if((n&sr)!==0){var f=r.b?.pending?this.#i:this.#r;f.push(r)}else At(r)&&((r.f&Ge)!==0&&this.#l.push(r),qe(r));var l=r.first;if(l!==null){r=l;continue}}var o=r.parent;for(r=r.next;r===null&&o!==null;)r=o.next,o=o.parent}}#o(t){for(const r of t)((r.f&ee)!==0?this.#c:this.#v).push(r),B(r,F);t.length=0}capture(t,r){this.#s.has(t)||this.#s.set(t,r),this.current.set(t,t.v)}activate(){M=this}deactivate(){M=null;for(const t of yr)if(yr.delete(t),t(),M!==null)break}neuter(){this.#f=!0}flush(){tt.length>0?Jn():this.#d(),M===this&&(this.#e===0&&Qe.delete(this),this.deactivate())}#d(){if(!this.#f)for(const t of this.#a)t();this.#a.clear()}increment(){this.#e+=1}decrement(){if(this.#e-=1,this.#e===0){for(const t of this.#c)B(t,ee),Be(t);for(const t of this.#v)B(t,ke),Be(t);this.#n=[],this.#t=[],this.flush()}else this.deactivate()}add_callback(t){this.#a.add(t)}settled(){return(this.#u??=kn()).promise}static ensure(){if(M===null){const t=M=new rt;Qe.add(M),rt.enqueue(()=>{M===t&&t.flush()})}return M}static enqueue(t){bt.length===0&&queueMicrotask(Yr),bt.unshift(t)}}function Jn(){var e=Fe;Kt=!0;try{var t=0;for(br(!0);tt.length>0;){var r=rt.ensure();if(t++>1e3){var n,s;Qn()}r.process(tt),Ie.clear()}}finally{Kt=!1,br(e),fr=null}}function Qn(){try{Mn()}catch(e){ir(e,fr)}}let Re=null;function mr(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(ze|se))===0&&At(n)&&(Re=[],qe(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?Xr(n):n.fn=null),Re.length>0)){Ie.clear();for(const s of Re)qe(s);Re=[]}}Re=null}}function Be(e){for(var t=fr=e;t.parent!==null;){t=t.parent;var r=t.f;if(Kt&&t===T&&(r&Ge)!==0)return;if((r&(He|he))!==0){if((r&F)===0)return;t.f^=F}}tt.push(t)}const Ie=new Map;function nt(e,t){var r={f:0,v:e,reactions:null,equals:$r,rv:0,wv:0};return r}function we(e,t){const r=nt(e);return us(r),r}function Vt(e,t=!1,r=!0){const n=nt(e);return t||(n.equals=Mr),it&&r&&O!==null&&O.l!==null&&(O.l.s??=[]).push(n),n}function re(e,t,r=!1){E!==null&&(!oe||(E.f&gr)!==0)&&ut()&&(E.f&(K|Ge|sr|gr))!==0&&!pe?.includes(e)&&Fn();let n=r?Ze(t):t;return st(e,n)}function st(e,t){if(!e.equals(t)){var r=e.v;Ke?Ie.set(e,t):Ie.set(e,r),e.v=t;var n=rt.ensure();n.capture(e,r),(e.f&K)!==0&&((e.f&ee)!==0&&ur(e),B(e,(e.f&Z)===0?F:ke)),e.wv=nn(),Br(e,ee),ut()&&T!==null&&(T.f&F)!==0&&(T.f&(he|He))===0&&(X===null?fs([e]):X.push(e))}return t}function Gt(e){re(e,e.v+1)}function Br(e,t){var r=e.reactions;if(r!==null)for(var n=ut(),s=r.length,a=0;a<s;a++){var i=r[a],f=i.f;if(!(!n&&i===T)){var l=(f&ee)===0;l&&B(i,t),(f&K)!==0?Br(i,ke):l&&((f&Ge)!==0&&Re!==null&&Re.push(i),Be(i))}}}function Ze(e){if(typeof e!="object"||e===null||je in e)return e;const t=er(e);if(t!==Pn&&t!==Cn)return e;var r=new Map,n=Zt(e),s=we(0),a=Ae,i=f=>{if(Ae===a)return f();var l=E,o=Ae;fe(null),Sr(a);var c=f();return fe(l),Sr(o),c};return n&&r.set("length",we(e.length)),new Proxy(e,{defineProperty(f,l,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&Un();var c=r.get(l);return c===void 0?c=i(()=>{var h=we(o.value);return r.set(l,h),h}):re(c,o.value,!0),!0},deleteProperty(f,l){var o=r.get(l);if(o===void 0){if(l in f){const c=i(()=>we(D));r.set(l,c),Gt(s)}}else re(o,D),Gt(s);return!0},get(f,l,o){if(l===je)return e;var c=r.get(l),h=l in f;if(c===void 0&&(!h||Bt(f,l)?.writable)&&(c=i(()=>{var d=Ze(h?f[l]:D),u=we(d);return u}),r.set(l,c)),c!==void 0){var v=x(c);return v===D?void 0:v}return Reflect.get(f,l,o)},getOwnPropertyDescriptor(f,l){var o=Reflect.getOwnPropertyDescriptor(f,l);if(o&&"value"in o){var c=r.get(l);c&&(o.value=x(c))}else if(o===void 0){var h=r.get(l),v=h?.v;if(h!==void 0&&v!==D)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return o},has(f,l){if(l===je)return!0;var o=r.get(l),c=o!==void 0&&o.v!==D||Reflect.has(f,l);if(o!==void 0||T!==null&&(!c||Bt(f,l)?.writable)){o===void 0&&(o=i(()=>{var v=c?Ze(f[l]):D,d=we(v);return d}),r.set(l,o));var h=x(o);if(h===D)return!1}return c},set(f,l,o,c){var h=r.get(l),v=l in f;if(n&&l==="length")for(var d=o;d<h.v;d+=1){var u=r.get(d+"");u!==void 0?re(u,D):d in f&&(u=i(()=>we(D)),r.set(d+"",u))}if(h===void 0)(!v||Bt(f,l)?.writable)&&(h=i(()=>we(void 0)),re(h,Ze(o)),r.set(l,h));else{v=h.v!==D;var p=i(()=>Ze(o));re(h,p)}var _=Reflect.getOwnPropertyDescriptor(f,l);if(_?.set&&_.set.call(c,o),!v){if(n&&typeof l=="string"){var I=r.get("length"),g=Number(l);Number.isInteger(g)&&g>=I.v&&re(I,g+1)}Gt(s)}return!0},ownKeys(f){x(s);var l=Reflect.ownKeys(f).filter(h=>{var v=r.get(h);return v===void 0||v.v!==D});for(var[o,c]of r)c.v!==D&&!(o in f)&&l.push(o);return l},setPrototypeOf(){jn()}})}var Xn,Zn,es;function ft(e=""){return document.createTextNode(e)}function wt(e){return Zn.call(e)}function Ot(e){return es.call(e)}function S(e,t){return wt(e)}function Se(e,t){{var r=wt(e);return r instanceof Comment&&r.data===""?Ot(r):r}}function k(e,t=1,r=!1){let n=e;for(;t--;)n=Ot(n);return n}function ts(e){e.textContent=""}function Gr(){return!1}function cr(e){var t=E,r=T;fe(null),xe(null);try{return e()}finally{fe(t),xe(r)}}function Hr(e){T===null&&E===null&&Dn(),E!==null&&(E.f&Z)!==0&&T===null&&$n(),Ke&&An()}function rs(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function _e(e,t,r,n=!0){var s=T;s!==null&&(s.f&se)!==0&&(e|=se);var a={ctx:O,deps:null,nodes_start:null,nodes_end:null,f:e|ee,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{qe(a),a.f|=rr}catch(l){throw $e(a),l}else t!==null&&Be(a);if(n){var i=a;if(r&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&Rt)===0&&(i=i.first),i!==null&&(i.parent=s,s!==null&&rs(i,s),E!==null&&(E.f&K)!==0&&(e&He)===0)){var f=E;(f.effects??=[]).push(i)}}return a}function zr(e){const t=_e(Nt,null,!1);return B(t,F),t.teardown=e,t}function Wt(e){Hr();var t=T.f,r=!E&&(t&he)!==0&&(t&rr)===0;if(r){var n=O;(n.e??=[]).push(e)}else return Kr(e)}function Kr(e){return _e(tr|Or,e,!1)}function ns(e){return Hr(),_e(Nt|Or,e,!0)}function ss(e){return _e(tr,e,!1)}function as(e){return _e(sr|Rt,e,!0)}function is(e,t=0){return _e(Nt|t,e,!0)}function Pe(e,t=[],r=[]){Kn(t,r,n=>{_e(Nt,()=>e(...n.map(x)),!0)})}function Wr(e,t=0){var r=_e(Ge|t,e,!0);return r}function St(e,t=!0){return _e(he|Rt,e,!0,t)}function Jr(e){var t=e.teardown;if(t!==null){const r=Ke,n=E;wr(!0),fe(null);try{t.call(null)}finally{wr(r),fe(n)}}}function Qr(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&cr(()=>{s.abort(ar)});var n=r.next;(r.f&He)!==0?r.parent=null:$e(r,t),r=n}}function ls(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&he)===0&&$e(t),t=r}}function $e(e,t=!0){var r=!1;(t||(e.f&Nn)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(os(e.nodes_start,e.nodes_end),r=!0),Qr(e,t&&!r),Et(e,0),B(e,ze);var n=e.transitions;if(n!==null)for(const a of n)a.stop();Jr(e);var s=e.parent;s!==null&&s.first!==null&&Xr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function os(e,t){for(;e!==null;){var r=e===t?null:Ot(e);e.remove(),e=r}}function Xr(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Zr(e,t){var r=[];vr(e,r,!0),en(r,()=>{$e(e),t&&t()})}function en(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var s of e)s.out(n)}else t()}function vr(e,t,r){if((e.f&se)===0){if(e.f^=se,e.transitions!==null)for(const i of e.transitions)(i.is_global||r)&&t.push(i);for(var n=e.first;n!==null;){var s=n.next,a=(n.f&nr)!==0||(n.f&he)!==0;vr(n,t,a?r:!1),n=s}}}function dr(e){tn(e,!0)}function tn(e,t){if((e.f&se)!==0){e.f^=se,(e.f&F)===0&&(B(e,ee),Be(e));for(var r=e.first;r!==null;){var n=r.next,s=(r.f&nr)!==0||(r.f&he)!==0;tn(r,s?t:!1),r=n}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let Fe=!1;function br(e){Fe=e}let Ke=!1;function wr(e){Ke=e}let E=null,oe=!1;function fe(e){E=e}let T=null;function xe(e){T=e}let pe=null;function us(e){E!==null&&(pe===null?pe=[e]:pe.push(e))}let Y=null,z=0,X=null;function fs(e){X=e}let rn=1,at=0,Ae=at;function Sr(e){Ae=e}let Ee=!1;function nn(){return++rn}function At(e){var t=e.f;if((t&ee)!==0)return!0;if((t&ke)!==0){var r=e.deps,n=(t&Z)!==0;if(r!==null){var s,a,i=(t&gt)!==0,f=n&&T!==null&&!Ee,l=r.length;if((i||f)&&(T===null||(T.f&ze)===0)){var o=e,c=o.parent;for(s=0;s<l;s++)a=r[s],(i||!a?.reactions?.includes(o))&&(a.reactions??=[]).push(o);i&&(o.f^=gt),f&&c!==null&&(c.f&Z)===0&&(o.f^=Z)}for(s=0;s<l;s++)if(a=r[s],At(a)&&qr(a),a.wv>e.wv)return!0}(!n||T!==null&&!Ee)&&B(e,F)}return!1}function sn(e,t,r=!0){var n=e.reactions;if(n!==null&&!pe?.includes(e))for(var s=0;s<n.length;s++){var a=n[s];(a.f&K)!==0?sn(a,t,!1):t===a&&(r?B(a,ee):(a.f&F)!==0&&B(a,ke),Be(a))}}function an(e){var t=Y,r=z,n=X,s=E,a=Ee,i=pe,f=O,l=oe,o=Ae,c=e.f;Y=null,z=0,X=null,Ee=(c&Z)!==0&&(oe||!Fe||E===null),E=(c&(he|He))===0?e:null,pe=null,yt(e.ctx),oe=!1,Ae=++at,e.ac!==null&&(cr(()=>{e.ac.abort(ar)}),e.ac=null);try{e.f|=zt;var h=e.fn,v=h(),d=e.deps;if(Y!==null){var u;if(Et(e,z),d!==null&&z>0)for(d.length=z+Y.length,u=0;u<Y.length;u++)d[z+u]=Y[u];else e.deps=d=Y;if(!Ee||(c&K)!==0&&e.reactions!==null)for(u=z;u<d.length;u++)(d[u].reactions??=[]).push(e)}else d!==null&&z<d.length&&(Et(e,z),d.length=z);if(ut()&&X!==null&&!oe&&d!==null&&(e.f&(K|ke|ee))===0)for(u=0;u<X.length;u++)sn(X[u],e);return s!==null&&s!==e&&(at++,X!==null&&(n===null?n=X:n.push(...X))),(e.f&Oe)!==0&&(e.f^=Oe),v}catch(p){return Yn(p)}finally{e.f^=zt,Y=t,z=r,X=n,E=s,Ee=a,pe=i,yt(f),oe=l,Ae=o}}function cs(e,t){let r=t.reactions;if(r!==null){var n=In.call(r,e);if(n!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[n]=r[s],r.pop())}}r===null&&(t.f&K)!==0&&(Y===null||!Y.includes(t))&&(B(t,ke),(t.f&(Z|gt))===0&&(t.f^=gt),Fr(t),Et(t,0))}function Et(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)cs(e,r[n])}function qe(e){var t=e.f;if((t&ze)===0){B(e,F);var r=T,n=Fe;T=e,Fe=!0;try{(t&Ge)!==0?ls(e):Qr(e),Jr(e);var s=an(e);e.teardown=typeof s=="function"?s:null,e.wv=rn;var a;kr&&yn&&(e.f&ee)!==0&&e.deps}finally{Fe=n,T=r}}}function x(e){var t=e.f,r=(t&K)!==0;if(E!==null&&!oe){var n=T!==null&&(T.f&ze)!==0;if(!n&&!pe?.includes(e)){var s=E.deps;if((E.f&zt)!==0)e.rv<at&&(e.rv=at,Y===null&&s!==null&&s[z]===e?z++:Y===null?Y=[e]:(!Ee||!Y.includes(e))&&Y.push(e));else{(E.deps??=[]).push(e);var a=e.reactions;a===null?e.reactions=[E]:a.includes(E)||a.push(E)}}}else if(r&&e.deps===null&&e.effects===null){var i=e,f=i.parent;f!==null&&(f.f&Z)===0&&(i.f^=Z)}if(Ke){if(Ie.has(e))return Ie.get(e);if(r){i=e;var l=i.v;return((i.f&F)===0&&i.reactions!==null||ln(i))&&(l=ur(i)),Ie.set(i,l),l}}else if(r){if(i=e,Ye?.has(i))return Ye.get(i);At(i)&&qr(i)}if((e.f&Oe)!==0)throw e.v;return e.v}function ln(e){if(e.v===D)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Ie.has(t)||(t.f&K)!==0&&ln(t))return!0;return!1}function ct(e){var t=oe;try{return oe=!0,e()}finally{oe=t}}const vs=-7169;function B(e,t){e.f=e.f&vs|t}function ds(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(je in e)Jt(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&je in r&&Jt(r)}}}function Jt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Jt(e[n],t)}catch{}const r=er(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Rr(r);for(let s in n){const a=n[s].get;if(a)try{a.call(e)}catch{}}}}}function ps(e,t,r,n={}){function s(a){if(n.capture||hs.call(t,a),!a.cancelBubble)return cr(()=>r?.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?lr(()=>{t.addEventListener(e,s,n)}):t.addEventListener(e,s,n),s}function Ce(e,t,r,n,s){var a={capture:n,passive:s},i=ps(e,t,r,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&zr(()=>{t.removeEventListener(e,i,a)})}let Er=null;function hs(e){var t=this,r=t.ownerDocument,n=e.type,s=e.composedPath?.()||[],a=s[0]||e.target;Er=e;var i=0,f=Er===e&&e.__root;if(f){var l=s.indexOf(f);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var o=s.indexOf(t);if(o===-1)return;l<=o&&(i=l)}if(a=s[i]||e.target,a!==t){ht(e,"currentTarget",{configurable:!0,get(){return a||r}});var c=E,h=T;fe(null),xe(null);try{for(var v,d=[];a!==null;){var u=a.assignedSlot||a.parentNode||a.host||null;try{var p=a["__"+n];if(p!=null&&(!a.disabled||e.target===a))if(Zt(p)){var[_,...I]=p;_.apply(a,[e,...I])}else p.call(a,e)}catch(g){v?d.push(g):v=g}if(e.cancelBubble||u===t||u===null)break;a=u}if(v){for(let g of d)queueMicrotask(()=>{throw g});throw v}}finally{e.__root=t,delete e.currentTarget,fe(c),xe(h)}}}function _s(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Tt(e,t){var r=T;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function P(e,t){var r=(t&Sn)!==0,n=(t&En)!==0,s,a=!e.startsWith("<!>");return()=>{s===void 0&&(s=_s(a?e:"<!>"+e),r||(s=wt(s)));var i=n||Xn?document.importNode(s,!0):s.cloneNode(!0);if(r){var f=wt(i),l=i.lastChild;Tt(f,l)}else Tt(i,i);return i}}function et(e=""){{var t=ft(e+"");return Tt(t,t),t}}function Xe(){var e=document.createDocumentFragment(),t=document.createComment(""),r=ft();return e.append(t,r),Tt(t,r),e}function b(e,t){e!==null&&e.before(t)}function ue(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function on(e){O===null&&Ar(),it&&O.l!==null?ys(O).m.push(e):Wt(()=>{const t=ct(e);if(typeof t=="function")return t})}function gs(e){O===null&&Ar(),on(()=>()=>ct(e))}function ys(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}function A(e,t,r=!1){var n=e,s=null,a=null,i=D,f=r?nr:0,l=!1;const o=(d,u=!0)=>{l=!0,v(u,d)};var c=null;function h(){c!==null&&(c.lastChild.remove(),n.before(c),c=null);var d=i?s:a,u=i?a:s;d&&dr(d),u&&Zr(u,()=>{i?a=null:s=null})}const v=(d,u)=>{if(i!==(i=d)){var p=Gr(),_=n;if(p&&(c=document.createDocumentFragment(),c.append(_=ft())),i?s??=u&&St(()=>u(_)):a??=u&&St(()=>u(_)),p){var I=M,g=i?s:a,w=i?a:s;g&&I.skipped_effects.delete(g),w&&I.skipped_effects.add(w),I.add_callback(h)}else h()}};Wr(()=>{l=!1,t(o),l||v(null,null)},f)}function ms(e,t,r){for(var n=e.items,s=[],a=t.length,i=0;i<a;i++)vr(t[i].e,s,!0);var f=a>0&&s.length===0&&r!==null;if(f){var l=r.parentNode;ts(l),l.append(r),n.clear(),le(e,t[0].prev,t[a-1].next)}en(s,()=>{for(var o=0;o<a;o++){var c=t[o];f||(n.delete(c.k),le(e,c.prev,c.next)),$e(c.e,!f)}})}function un(e,t,r,n,s,a=null){var i=e,f={flags:t,items:new Map,first:null},l=(t&xr)!==0;if(l){var o=e;i=o.appendChild(ft())}var c=null,h=!1,v=new Map,d=jr(()=>{var I=r();return Zt(I)?I:I==null?[]:Nr(I)}),u,p;function _(){bs(p,u,f,v,i,s,t,n,r),a!==null&&(u.length===0?c?dr(c):c=St(()=>a(i)):c!==null&&Zr(c,()=>{c=null}))}Wr(()=>{p??=T,u=x(d);var I=u.length;if(!(h&&I===0)){h=I===0;var g,w,N,C;if(Gr()){var y=new Set,m=M;for(w=0;w<I;w+=1){N=u[w],C=n(N,w);var R=f.items.get(C)??v.get(C);R?(t&(xt|kt))!==0&&fn(R,N,w,t):(g=cn(null,f,null,null,N,C,w,s,t,r,!0),v.set(C,g)),y.add(C)}for(const[te,ce]of f.items)y.has(te)||m.skipped_effects.add(ce.e);m.add_callback(_)}else _();x(d)}})}function bs(e,t,r,n,s,a,i,f,l){var o=(i&bn)!==0,c=(i&(xt|kt))!==0,h=t.length,v=r.items,d=r.first,u=d,p,_=null,I,g=[],w=[],N,C,y,m;if(o)for(m=0;m<h;m+=1)N=t[m],C=f(N,m),y=v.get(C),y!==void 0&&(y.a?.measure(),(I??=new Set).add(y));for(m=0;m<h;m+=1){if(N=t[m],C=f(N,m),y=v.get(C),y===void 0){var R=n.get(C);if(R!==void 0){n.delete(C),v.set(C,R);var te=_?_.next:u;le(r,_,R),le(r,R,te),Ht(R,te,s),_=R}else{var ce=u?u.e.nodes_start:s;_=cn(ce,r,_,_===null?r.first:_.next,N,C,m,a,i,l)}v.set(C,_),g=[],w=[],u=_.next;continue}if(c&&fn(y,N,m,i),(y.e.f&se)!==0&&(dr(y.e),o&&(y.a?.unfix(),(I??=new Set).delete(y))),y!==u){if(p!==void 0&&p.has(y)){if(g.length<w.length){var ae=w[0],J;_=ae.prev;var De=g[0],me=g[g.length-1];for(J=0;J<g.length;J+=1)Ht(g[J],ae,s);for(J=0;J<w.length;J+=1)p.delete(w[J]);le(r,De.prev,me.next),le(r,_,De),le(r,me,ae),u=ae,_=me,m-=1,g=[],w=[]}else p.delete(y),Ht(y,u,s),le(r,y.prev,y.next),le(r,y,_===null?r.first:_.next),le(r,_,y),_=y;continue}for(g=[],w=[];u!==null&&u.k!==C;)(u.e.f&se)===0&&(p??=new Set).add(u),w.push(u),u=u.next;if(u===null)continue;y=u}g.push(y),_=y,u=y.next}if(u!==null||p!==void 0){for(var ve=p===void 0?[]:Nr(p);u!==null;)(u.e.f&se)===0&&ve.push(u),u=u.next;var Ne=ve.length;if(Ne>0){var U=(i&xr)!==0&&h===0?s:null;if(o){for(m=0;m<Ne;m+=1)ve[m].a?.measure();for(m=0;m<Ne;m+=1)ve[m].a?.fix()}ms(r,ve,U)}}o&&lr(()=>{if(I!==void 0)for(y of I)y.a?.apply()}),e.first=r.first&&r.first.e,e.last=_&&_.e;for(var ie of n.values())$e(ie.e);n.clear()}function fn(e,t,r,n){(n&xt)!==0&&st(e.v,t),(n&kt)!==0?st(e.i,r):e.i=r}function cn(e,t,r,n,s,a,i,f,l,o,c){var h=(l&xt)!==0,v=(l&wn)===0,d=h?v?Vt(s,!1,!1):nt(s):s,u=(l&kt)===0?i:nt(i),p={i:u,v:d,k:a,a:null,e:null,prev:r,next:n};try{if(e===null){var _=document.createDocumentFragment();_.append(e=ft())}return p.e=St(()=>f(e,d,u,o),qn),p.e.prev=r&&r.e,p.e.next=n&&n.e,r===null?c||(t.first=p):(r.next=p,r.e.next=p.e),n!==null&&(n.prev=p,n.e.prev=p.e),p}finally{}}function Ht(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,s=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==null&&a!==n;){var i=Ot(a);s.before(a),a=i}}function le(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function ws(e,t,r){var n=e==null?"":""+e;return n=n?n+" "+t:t,n===""?null:n}function Ss(e,t){return e==null?null:String(e)}function Es(e,t,r,n,s,a){var i=e.__className;if(i!==r||i===void 0){var f=ws(r,n);f==null?e.removeAttribute("class"):e.className=f,e.__className=r}return a}function Ts(e,t,r,n){var s=e.__style;if(s!==t){var a=Ss(t);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}return n}const Is=Symbol("is custom element"),Ps=Symbol("is html");function Cs(e,t){var r=vn(e);r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Tr(e,t,r,n){var s=vn(e);s[t]!==(s[t]=r)&&(t==="loading"&&(e[Rn]=r),r==null?e.removeAttribute(t):typeof r!="string"&&xs(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function vn(e){return e.__attributes??={[Is]:e.nodeName.includes("-"),[Ps]:e.namespaceURI===Tn}}var Ir=new Map;function xs(e){var t=e.getAttribute("is")||e.nodeName,r=Ir.get(t);if(r)return r;Ir.set(t,r=[]);for(var n,s=e,a=Element.prototype;a!==s;){n=Rr(s);for(var i in n)n[i].set&&r.push(i);s=er(s)}return r}function Pr(e,t){return e===t||e?.[je]===t}function ks(e={},t,r,n){return ss(()=>{var s,a;return is(()=>{s=a,a=[],ct(()=>{e!==r(...a)&&(t(e,...a),s&&Pr(r(...s),e)&&t(null,...s))})}),()=>{lr(()=>{a&&Pr(r(...a),e)&&t(null,...a)})}}),e}function vt(e=!1){const t=O,r=t.l.u;if(!r)return;let n=()=>ds(t.s);if(e){let s=0,a={};const i=or(()=>{let f=!1;const l=t.s;for(const o in l)l[o]!==a[o]&&(a[o]=l[o],f=!0);return f&&s++,s});n=()=>x(i)}r.b.length&&ns(()=>{Cr(t,n),_t(r.b)}),Wt(()=>{const s=ct(()=>r.m.map(xn));return()=>{for(const a of s)typeof a=="function"&&a()}}),r.a.length&&Wt(()=>{Cr(t,n),_t(r.a)})}function Cr(e,t){if(e.l.s)for(const r of e.l.s)x(r);t()}function pr(e,t,r){if(e==null)return t(void 0),r&&r(void 0),Te;const n=ct(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const Ue=[];function Ns(e,t){return{subscribe:ge(e,t).subscribe}}function ge(e,t=Te){let r=null;const n=new Set;function s(f){if(Dr(e,f)&&(e=f,r)){const l=!Ue.length;for(const o of n)o[1](),Ue.push(o,e);if(l){for(let o=0;o<Ue.length;o+=2)Ue[o][0](Ue[o+1]);Ue.length=0}}}function a(f){s(f(e))}function i(f,l=Te){const o=[f,l];return n.add(o),n.size===1&&(r=t(s,a)||Te),f(e),()=>{n.delete(o),n.size===0&&r&&(r(),r=null)}}return{set:s,update:a,subscribe:i}}function W(e,t,r){const n=!Array.isArray(e),s=n?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return Ns(r,(i,f)=>{let l=!1;const o=[];let c=0,h=Te;const v=()=>{if(c)return;h();const u=t(n?o[0]:o,i,f);a?i(u):h=typeof u=="function"?u:Te},d=s.map((u,p)=>pr(u,_=>{o[p]=_,c&=~(1<<p),l&&v()},()=>{c|=1<<p}));return l=!0,v(),function(){_t(d),h(),l=!1}})}function Rs(e){let t;return pr(e,r=>t=r)(),t}let Qt=Symbol();function j(e,t,r){const n=r[t]??={store:null,source:Vt(void 0),unsubscribe:Te};if(n.store!==e&&!(Qt in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=Te;else{var s=!0;n.unsubscribe=pr(e,a=>{s?n.source.v=a:re(n.source,a)}),s=!1}return e&&Qt in r?Rs(e):x(n.source)}function dt(){const e={};function t(){zr(()=>{for(var r in e)e[r].unsubscribe();ht(e,Qt,{enumerable:!1,value:!0})})}return[e,t]}const Vs={SEARCH_ENDPOINT:"/api/search",async searchVideos(e,t=10){if(!e||!e.trim())throw new Error("Search query is required");try{const r=new URL(this.SEARCH_ENDPOINT,window.location.origin);r.searchParams.append("q",e.trim()),r.searchParams.append("max_results",t.toString());const n=await fetch(r.toString());if(!n.ok)throw new Error(`Search failed: ${n.status} ${n.statusText}`);return(await n.json()).map(a=>({id:a.videoId,title:a.title,author:a.author,thumbnail:a.videoThumbnails?.[0]?.url||`https://i.ytimg.com/vi/${a.videoId}/default.jpg`,description:a.description||"",duration:a.lengthSeconds}))}catch(r){throw console.error("Search error:",r),r}}},$t=ge({query:"",results:[],isSearching:!1,error:null}),It=ge(""),Le=ge([]),Pt=ge(!1),Ve=ge(null),Os=W(Le,e=>e&&e.length>0);It.subscribe(e=>{$t.update(t=>({...t,query:e}))});Le.subscribe(e=>{$t.update(t=>({...t,results:e}))});Pt.subscribe(e=>{$t.update(t=>({...t,isSearching:e}))});Ve.subscribe(e=>{$t.update(t=>({...t,error:e}))});const As={async performSearch(e){if(!e||!e.trim()){Ve.set("Search query is required");return}try{Pt.set(!0),Ve.set(null),It.set(e.trim()),console.log("Searching for:",e.trim());const t=await Vs.searchVideos(e.trim());Le.set(t),console.log("Search completed. Found",t.length,"results")}catch(t){console.error("Search error:",t),Ve.set(t.message||"Search failed"),Le.set([])}finally{Pt.set(!1)}},clearSearch(){It.set(""),Le.set([]),Ve.set(null)},clearError(){Ve.set(null)}};var $s=P('<span class="loading svelte-6i474a">⏳</span>'),Ds=P('<form id="search" class="svelte-6i474a"><input id="query" name="q" type="text" placeholder="Buscar un video de YouTube" class="svelte-6i474a"/> <button type="submit" id="submit" class="svelte-6i474a"><!></button></form>');function Ms(e,t){lt(t,!1);const[r,n]=dt(),s=()=>j(Pt,"$isSearching",r);let a=Vt("");It.subscribe(u=>{re(a,u)});function i(u){u.preventDefault(),x(a).trim()&&As.performSearch(x(a).trim())}function f(u){re(a,u.target.value)}vt();var l=Ds(),o=S(l),c=k(o,2),h=S(c);{var v=u=>{var p=$s();b(u,p)},d=u=>{var p=et("🔍");b(u,p)};A(h,u=>{s()?u(v):u(d,!1)})}Pe(u=>{Cs(o,x(a)),o.disabled=s(),c.disabled=u},[()=>s()||!x(a).trim()]),Ce("input",o,f),Ce("submit",l,i),b(e,l),ot(),n()}var Us=P('<header class="svelte-yp1ntj"><h1 class="svelte-yp1ntj">Rockola de <strong class="svelte-yp1ntj">YouTube</strong></h1> <!></header>');function js(e){var t=Us(),r=k(S(t),2);Ms(r,{}),b(e,t)}const q={prefix:"ls.",setItem(e,t){try{const r=this.prefix+e,n=JSON.stringify(t);return localStorage.setItem(r,n),!0}catch(r){return console.error("Error setting localStorage item:",r),!1}},getItem(e){try{const t=this.prefix+e,r=localStorage.getItem(t);return r===null?null:JSON.parse(r)}catch(t){return console.error("Error getting localStorage item:",t),null}},removeItem(e){try{const t=this.prefix+e;return localStorage.removeItem(t),!0}catch(t){return console.error("Error removing localStorage item:",t),!1}},clear(){try{return Object.keys(localStorage).forEach(t=>{t.startsWith(this.prefix)&&localStorage.removeItem(t)}),!0}catch(e){return console.error("Error clearing localStorage:",e),!1}}},L={UPCOMING:"upcoming",CURRENT_VIDEO:"current_video"};class Fs{constructor(){this.player=null,this.ready=!1,this.apiLoaded=!1,this.pendingPlay=null,this.state={videoId:null,videoTitle:null,playerState:"stopped",currentTime:0,duration:0},this.stateChangeCallbacks=[],this.progressCallbacks=[],this.loadYouTubeAPI()}loadYouTubeAPI(){if(!this.apiLoaded){if(window.YT&&window.YT.Player){this.apiLoaded=!0,this.ready=!0,this.createPlayer();return}if(window.onYouTubeIframeAPIReady=()=>{console.log("YouTube Iframe API is ready"),this.apiLoaded=!0,this.ready=!0,this.createPlayer(),this.notifyStateChange()},!document.querySelector('script[src*="youtube.com/iframe_api"]')){const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";const r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r)}}}createPlayer(){if(!this.ready||this.player)return;if(!document.getElementById("youtube-player")){console.warn("YouTube player element not found, retrying..."),setTimeout(()=>this.createPlayer(),100);return}this.player=new YT.Player("youtube-player",{height:"100%",width:"100%",playerVars:{rel:0,showinfo:0,modestbranding:1,fs:1,cc_load_policy:0,iv_load_policy:3,autohide:0,controls:0},events:{onReady:r=>this.onPlayerReady(r),onStateChange:r=>this.onPlayerStateChange(r)}})}onPlayerReady(t){if(console.log("YouTube Player is ready"),this.pendingPlay?.id){try{this.player.loadVideoById(this.pendingPlay.id),this.state.videoId=this.pendingPlay.id,this.state.videoTitle=this.pendingPlay.title,this.state.playerState="playing",q.setItem(L.CURRENT_VIDEO,{id:this.pendingPlay.id,title:this.pendingPlay.title})}catch(n){console.warn("Could not start pending playback:",n)}finally{this.pendingPlay=null}this.notifyStateChange();return}const r=q.getItem(L.CURRENT_VIDEO);if(r?.id){try{this.player.cueVideoById(r.id),this.state.videoId=r.id,this.state.videoTitle=r.title,this.state.playerState="paused"}catch(n){console.warn("Could not restore current video:",n)}this.notifyStateChange()}}onPlayerStateChange(t){const r=this.state.playerState;switch(t.data){case YT.PlayerState.PLAYING:this.state.playerState="playing",console.log("Video playing"),this.startProgressTracking();break;case YT.PlayerState.PAUSED:this.state.playerState="paused",console.log("Video paused"),this.stopProgressTracking();break;case YT.PlayerState.ENDED:this.state.playerState="ended",console.log("🎬 Video ended - Playing next..."),this.stopProgressTracking(),q.removeItem(L.CURRENT_VIDEO),this.playNext();break;case YT.PlayerState.BUFFERING:this.state.playerState="buffering",console.log("Video buffering...");break;default:this.state.playerState="stopped",console.log("Player stopped"),this.stopProgressTracking()}r!==this.state.playerState&&console.log(`Player state: ${r} → ${this.state.playerState}`),this.notifyStateChange()}startProgressTracking(){this.progressInterval||(this.progressInterval=setInterval(()=>{if(this.player&&this.state.playerState==="playing")try{this.state.currentTime=this.player.getCurrentTime()||0,this.state.duration=this.player.getDuration()||0,this.notifyProgress()}catch(t){console.warn("Error getting video progress:",t)}},1e3))}stopProgressTracking(){this.progressInterval&&(clearInterval(this.progressInterval),this.progressInterval=null)}playVideo(t,r){if(!this.player){this.pendingPlay={id:t,title:r},this.state.videoId=t,this.state.videoTitle=r,this.state.playerState="loading",q.setItem(L.CURRENT_VIDEO,{id:t,title:r}),this.notifyStateChange();return}this.player.loadVideoById(t),this.state.videoId=t,this.state.videoTitle=r,this.state.playerState="playing",q.setItem(L.CURRENT_VIDEO,{id:t,title:r}),this.notifyStateChange()}play(){this.player?.playVideo&&this.player.playVideo()}pause(){this.player?.pauseVideo&&this.player.pauseVideo()}playNext(){const t=q.getItem(L.UPCOMING)||[];if(t.length>0){const r=t.shift();this.playVideo(r.id,r.title),q.setItem(L.UPCOMING,t)}else this.state.videoId=null,this.state.videoTitle=null,this.state.playerState="stopped",q.removeItem(L.CURRENT_VIDEO),console.log("No more videos in queue - player stopped"),this.notifyStateChange()}queueVideo(t,r){const n=q.getItem(L.UPCOMING)||[],s={id:t,title:r};return n.push(s),q.setItem(L.UPCOMING,n),n}deleteVideo(t){const n=(q.getItem(L.UPCOMING)||[]).filter(s=>s.id!==t);return q.setItem(L.UPCOMING,n),n}getUpcoming(){return q.getItem(L.UPCOMING)||[]}isVideoEnded(){return this.state.playerState==="ended"}getVideoProgress(){if(!this.player)return null;try{const t=this.state.currentTime,r=this.state.duration,n=r>0?t/r*100:0;return{currentTime:t,duration:r,progress:n,isEnded:this.state.playerState==="ended",timeRemaining:Math.max(0,r-t)}}catch(t){return console.warn("Error getting video progress:",t),null}}formatTime(t){if(!t||t<0)return"0:00";const r=Math.floor(t/60),n=Math.floor(t%60);return`${r}:${n.toString().padStart(2,"0")}`}onStateChange(t){return this.stateChangeCallbacks.push(t),()=>{const r=this.stateChangeCallbacks.indexOf(t);r>-1&&this.stateChangeCallbacks.splice(r,1)}}onProgress(t){return this.progressCallbacks.push(t),()=>{const r=this.progressCallbacks.indexOf(t);r>-1&&this.progressCallbacks.splice(r,1)}}notifyStateChange(){this.stateChangeCallbacks.forEach(t=>{try{t(this.state)}catch(r){console.error("Error in state change callback:",r)}})}notifyProgress(){const t=this.getVideoProgress();this.progressCallbacks.forEach(r=>{try{r(t)}catch(n){console.error("Error in progress callback:",n)}})}getState(){return{...this.state}}isReady(){return this.ready}destroy(){this.stopProgressTracking(),this.stateChangeCallbacks=[],this.progressCallbacks=[],this.player&&(this.player.destroy(),this.player=null)}}const V=new Fs,ye=ge({ready:!1,videoId:null,videoTitle:null,playerState:"stopped",currentTime:0,duration:0}),pt=ge({currentTime:0,duration:0,progress:0,isEnded:!1,timeRemaining:0});V.onStateChange(e=>{ye.update(t=>({...t,ready:V.isReady(),videoId:e.videoId,videoTitle:e.videoTitle,playerState:e.playerState,currentTime:e.currentTime,duration:e.duration}))});V.onProgress(e=>{e&&pt.set(e)});const qs=W(ye,e=>e.playerState==="playing");W(ye,e=>e.playerState==="paused");W(ye,e=>e.playerState==="buffering");const Ls=W(ye,e=>!!e.videoId&&e.playerState!=="ended");W(ye,e=>!!e.videoId);const Ys=W(ye,e=>!e.videoId||e.playerState==="ended"),Bs=W(pt,e=>V.formatTime(e.currentTime)),Gs=W(pt,e=>V.formatTime(e.duration));W(pt,e=>V.formatTime(e.timeRemaining));const Xt={playVideo:(e,t)=>V.playVideo(e,t),play:()=>V.play(),pause:()=>V.pause(),playNext:()=>V.playNext(),queueVideo:(e,t)=>V.queueVideo(e,t),deleteVideo:e=>V.deleteVideo(e),togglePlay:()=>{const e=V.getState();e.playerState==="playing"?V.pause():e.videoId&&e.playerState!=="ended"?V.play():V.getUpcoming().length>0&&V.playNext()}};var Hs=P('<div class="loading-overlay svelte-1ppvoyb"><div class="loading-spinner svelte-1ppvoyb"></div> <p class="svelte-1ppvoyb">Loading YouTube Player...</p></div>'),zs=P('<div class="no-video-overlay svelte-1ppvoyb"><div class="no-video-message svelte-1ppvoyb"><h3 class="svelte-1ppvoyb">🎵 Welcome to Rockola YouTube</h3> <p class="svelte-1ppvoyb">Search for videos above or start your playlist to begin!</p></div></div>'),Ks=P('<div class="youtube-player-container svelte-1ppvoyb"><div id="youtube-player" class="svelte-1ppvoyb"></div> <!> <!></div>');function Ws(e,t){lt(t,!1);const[r,n]=dt(),s=()=>j(ye,"$youtubeState",r);let a=Vt();on(()=>{}),gs(()=>{}),vt();var i=Ks(),f=S(i);ks(f,v=>re(a,v),()=>x(a));var l=k(f,2);{var o=v=>{var d=Hs();b(v,d)};A(l,v=>{s().ready||v(o)})}var c=k(l,2);{var h=v=>{var d=zs();b(v,d)};A(c,v=>{s().ready&&!s().videoId&&v(h)})}b(e,i),ot(),n()}const ne=ge([]),Js=q.getItem(L.UPCOMING)||[];ne.set(Js);const hr=W(ne,e=>e&&e.length>0);W(ne,e=>e?e.length:0);W(ne,e=>e&&e.length>0?e[0]:null);ne.subscribe(e=>{q.setItem(L.UPCOMING,e)});const Ct={addVideo(e,t){const r={id:e,title:t};return ne.update(n=>{const s=[...n,r];return console.log("Queued:",t),s}),r},removeVideo(e){ne.update(t=>{const r=t.filter(n=>n.id!==e);return console.log("Removed video from queue:",e),r})},moveVideo(e,t){ne.update(r=>{const n=[...r],[s]=n.splice(e,1);return n.splice(t,0,s),n})},clearPlaylist(){ne.set([]),console.log("Playlist cleared")},playNext(){ne.update(e=>{if(e.length>0){const t=e[0];return V.playVideo(t.id,t.title),e.slice(1)}return e})},startPlaylist(){V.getUpcoming().length>0&&(V.playNext(),console.log("Started playlist from beginning"))},getItemClass(e){return e===0?"next-to-play":""}};var Qs=P('<div class="error-message svelte-rogilh"><p class="svelte-rogilh"> </p></div>'),Xs=P('<p class="search-duration svelte-rogilh"> </p>'),Zs=P('<span class="play-hint svelte-rogilh">▶️ Click to play</span>'),ea=P('<span class="queue-hint svelte-rogilh">➕ Click to queue</span>'),ta=P('<div class="search-result svelte-rogilh" role="button" tabindex="0"><img class="search-thumbnail svelte-rogilh" loading="lazy"/> <div class="search-info svelte-rogilh"><p class="search-title svelte-rogilh"> </p> <p class="search-author svelte-rogilh"> </p> <!></div> <div class="action-hint svelte-rogilh"><!></div></div>'),ra=P('<div id="search-results" class="svelte-rogilh"><h3 class="svelte-rogilh">Search Results</h3> <div class="results-grid svelte-rogilh"></div></div>'),na=P("<!> <!>",1);function sa(e,t){lt(t,!1);const[r,n]=dt(),s=()=>j(Ys,"$isReadyForNewVideo",r),a=()=>j(hr,"$hasUpcomingVideos",r),i=()=>j(Ve,"$searchError",r),f=()=>j(Os,"$hasSearchResults",r),l=()=>j(Le,"$searchResults",r);function o(p){const _=s(),I=a();_&&!I?(Xt.playVideo(p.id,p.title),console.log("Playing now:",p.title)):(Ct.addVideo(p.id,p.title),console.log("Queued:",p.title))}vt();var c=na(),h=Se(c);{var v=p=>{var _=Qs(),I=S(_),g=S(I);Pe(()=>ue(g,`❌ Search Error: ${i()??""}`)),b(p,_)};A(h,p=>{i()&&p(v)})}var d=k(h,2);{var u=p=>{var _=ra(),I=k(S(_),2);un(I,5,l,g=>g.id,(g,w)=>{var N=ta(),C=S(N),y=k(C,2),m=S(y),R=S(m),te=k(m,2),ce=S(te),ae=k(te,2);{var J=U=>{var ie=Xs(),We=S(ie);Pe((Dt,Mt)=>ue(We,`${Dt??""}:${Mt??""}`),[()=>Math.floor(x(w).duration/60),()=>(x(w).duration%60).toString().padStart(2,"0")]),b(U,ie)};A(ae,U=>{x(w).duration&&U(J)})}var De=k(y,2),me=S(De);{var ve=U=>{var ie=Zs();b(U,ie)},Ne=U=>{var ie=ea();b(U,ie)};A(me,U=>{s()&&!a()?U(ve):U(Ne,!1)})}Pe(()=>{Tr(C,"src",x(w).thumbnail),Tr(C,"alt",x(w).title),ue(R,x(w).title),ue(ce,x(w).author)}),Ce("click",N,()=>o(x(w))),Ce("keydown",N,U=>U.key==="Enter"&&o(x(w))),b(g,N)}),b(p,_)};A(d,p=>{f()&&p(u)})}b(e,c),ot(),n()}var aa=P('<div class="progress-bar svelte-oe1mwa"><div class="progress-fill svelte-oe1mwa"></div></div>'),ia=P('<span class="state-indicator playing svelte-oe1mwa">▶️ Playing</span>'),la=P('<span class="state-indicator paused svelte-oe1mwa">⏸️ Paused</span>'),oa=P('<span class="state-indicator buffering svelte-oe1mwa">⏳ Buffering</span>'),ua=P('<span class="state-indicator ended svelte-oe1mwa">⏹️ Ended</span>'),fa=P('<span class="state-indicator stopped svelte-oe1mwa">⏹️ Stopped</span>'),ca=P('<div class="video-info svelte-oe1mwa"><p class="video-title svelte-oe1mwa"> </p> <div class="progress-container svelte-oe1mwa"><div class="time-info svelte-oe1mwa"><span class="current-time"> </span> <span class="duration"> </span></div> <!></div> <div class="player-state svelte-oe1mwa"><!></div> <div class="controls svelte-oe1mwa"><button class="control-btn svelte-oe1mwa"><!></button> <button class="control-btn svelte-oe1mwa">⏭️ Next</button></div></div>'),va=P('<button class="control-btn start-btn svelte-oe1mwa">▶️ Start Playlist</button>'),da=P('<p class="hint svelte-oe1mwa">Search for videos to get started!</p>'),pa=P('<div class="no-video svelte-oe1mwa"><p class="svelte-oe1mwa">No video playing</p> <!></div>'),ha=P('<div id="current-video-info" class="svelte-oe1mwa"><h3 class="svelte-oe1mwa">Now Playing</h3> <!></div>');function _a(e,t){lt(t,!1);const[r,n]=dt(),s=()=>j(ye,"$youtubeState",r),a=()=>j(Bs,"$formattedCurrentTime",r),i=()=>j(Gs,"$formattedDuration",r),f=()=>j(pt,"$progress",r),l=()=>j(qs,"$isPlaying",r),o=()=>j(Ls,"$hasCurrentVideo",r),c=()=>j(hr,"$hasUpcomingVideos",r);function h(){Xt.togglePlay()}function v(){Xt.playNext()}function d(){Ct.startPlaylist()}vt();var u=ha(),p=k(S(u),2);{var _=g=>{var w=ca(),N=S(w),C=S(N),y=k(N,2),m=S(y),R=S(m),te=S(R),ce=k(R,2),ae=S(ce),J=k(m,2);{var De=$=>{var Q=aa(),Je=S(Q);Pe(()=>Ts(Je,`width: ${f().progress??""}%`)),b($,Q)};A(J,$=>{f().duration>0&&$(De)})}var me=k(y,2),ve=S(me);{var Ne=$=>{var Q=ia();b($,Q)},U=$=>{var Q=Xe(),Je=Se(Q);{var Ut=G=>{var de=la();b(G,de)},jt=G=>{var de=Xe(),Ft=Se(de);{var qt=H=>{var be=oa();b(H,be)},Lt=H=>{var be=Xe(),pn=Se(be);{var hn=Me=>{var Yt=ua();b(Me,Yt)},_n=Me=>{var Yt=fa();b(Me,Yt)};A(pn,Me=>{s().playerState==="ended"?Me(hn):Me(_n,!1)},!0)}b(H,be)};A(Ft,H=>{s().playerState==="buffering"?H(qt):H(Lt,!1)},!0)}b(G,de)};A(Je,G=>{s().playerState==="paused"?G(Ut):G(jt,!1)},!0)}b($,Q)};A(ve,$=>{s().playerState==="playing"?$(Ne):$(U,!1)})}var ie=k(me,2),We=S(ie),Dt=S(We);{var Mt=$=>{var Q=et("⏸️ Pause");b($,Q)},dn=$=>{var Q=Xe(),Je=Se(Q);{var Ut=G=>{var de=et("▶️ Play");b(G,de)},jt=G=>{var de=Xe(),Ft=Se(de);{var qt=H=>{var be=et("▶️ Start Playlist");b(H,be)},Lt=H=>{var be=et("▶️ Play");b(H,be)};A(Ft,H=>{c()?H(qt):H(Lt,!1)},!0)}b(G,de)};A(Je,G=>{o()?G(Ut):G(jt,!1)},!0)}b($,Q)};A(Dt,$=>{l()?$(Mt):$(dn,!1)})}var _r=k(We,2);Pe(()=>{ue(C,s().videoTitle),ue(te,a()),ue(ae,i()),_r.disabled=!c()}),Ce("click",We,h),Ce("click",_r,v),b(g,w)},I=g=>{var w=pa(),N=k(S(w),2);{var C=m=>{var R=va();Ce("click",R,d),b(m,R)},y=m=>{var R=da();b(m,R)};A(N,m=>{c()?m(C):m(y,!1)})}b(g,w)};A(p,g=>{s().videoTitle?g(_):g(I,!1)})}b(e,u),ot(),n()}var ga=P('<li class="playlist-item svelte-jd1rwf"><span class="item-number svelte-jd1rwf"> </span> <p> </p> <button class="item-delete svelte-jd1rwf" title="Remove from playlist">🗑️</button></li>'),ya=P('<ol id="upcoming" class="svelte-jd1rwf"></ol> <div class="playlist-summary svelte-jd1rwf"><p class="svelte-jd1rwf"> </p></div>',1),ma=P('<div class="empty-playlist svelte-jd1rwf"><p class="svelte-jd1rwf">Your playlist is empty</p> <p class="hint svelte-jd1rwf">Search for videos and click on them to add to your queue!</p></div>'),ba=P('<div id="playlist" class="svelte-jd1rwf"><h3 class="svelte-jd1rwf">Lista de Reproducción</h3> <!></div>');function wa(e,t){lt(t,!1);const[r,n]=dt(),s=()=>j(hr,"$hasUpcomingVideos",r),a=()=>j(ne,"$upcoming",r);function i(v){Ct.removeVideo(v)}function f(v){return Ct.getItemClass(v)}vt();var l=ba(),o=k(S(l),2);{var c=v=>{var d=ya(),u=Se(d);un(u,7,a,g=>g.id,(g,w,N)=>{var C=ga(),y=S(C),m=S(y),R=k(y,2),te=S(R),ce=k(R,2);Pe(ae=>{ue(m,x(N)+1),Es(R,1,`item-title ${ae??""}`,"svelte-jd1rwf"),ue(te,x(w).title)},[()=>f(x(N))]),Ce("click",ce,()=>i(x(w).id)),b(g,C)});var p=k(u,2),_=S(p),I=S(_);Pe(()=>ue(I,`${a().length??""} video${a().length!==1?"s":""} in queue`)),b(v,d)},h=v=>{var d=ma();b(v,d)};A(o,v=>{s()?v(c):v(h,!1)})}b(e,l),ot(),n()}var Sa=P('<!> <div id="main-container" class="svelte-1vzsn1j"><div id="youtube-container" class="svelte-1vzsn1j"><!> <!></div> <div id="control-panel" class="svelte-1vzsn1j"><!> <!></div></div> <footer class="svelte-1vzsn1j"><em>Concept &amp; Design original: <a href="https://jgthms.com" class="svelte-1vzsn1j">J. Thomas</a></em><br/> Basado en <a href="https://github.com/jgthms/juketube" class="svelte-1vzsn1j">JukeTube</a>, modificado por <strong><a target="_blank" rel="noopener" href="https://github.com/DavidValenciaX" class="svelte-1vzsn1j">David Valencia</a></strong>.<br/> Código fuente disponible en <a href="https://github.com/DavidValenciaX/rockola-youtube" class="svelte-1vzsn1j">GitHub</a>.</footer>',1);function Ea(e){var t=Sa(),r=Se(t);js(r);var n=k(r,2),s=S(n),a=S(s);Ws(a,{});var i=k(a,2);sa(i,{});var f=k(s,2),l=S(f);_a(l,{});var o=k(l,2);wa(o,{}),b(e,t)}new Ea({target:document.getElementById("app")});
